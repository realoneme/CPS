var cps=cps||{};cps.public={init:function(){var t=this;t.headSwiper(),t.tabAnime(),t.tabChange(),t.fixSideIcons.call($(window)),t.slideFade(),t.stickSideBar(),t.scrollEvent(),t.goTop(),t.slideDownMenu(".J_navlogin",".J_menuhover",".J_downmenu"),t.suggestSearch()},stickSideBar:function(){var t=this,e=$(".J_sidebar"),n=$(".J_header"),i=$("body").outerHeight(),s=n.outerHeight();e.height(i-s),$(window).width()<1235?e.animate({width:-35},"normal").hide():e.animate({width:35},"normal").show(),$(window).resize(function(){t.fixSideIcons.call($(window)),$(this).width()<1235?e.css("width",0):$(this).width()>=1235&&e.css("width",35)})},slideFade:function(){var t,e=$(".J_slidefade"),n=$(".J_side-list"),i=$(".side-list_box");n.hover(function(){t&&clearTimeout(t),$(this).children(e).css({left:"-90px",opacity:1}),i.css("overflow","visible")},function(){$(this).children(e).css({left:"-140px",opacity:0}),clearTimeout(t),t=setTimeout(function(){i.css("overflow","hidden")},300)})},fixSideIcons:function(){var t=$(".J_side_userbox"),e=$(".J_side_fnbox"),n=$(this).outerHeight(),i=(n-t.outerHeight())/2;t.css("top",i),e.css("bottom",0)},goTop:function(){$(".J-totop").on("click",function(){$("html,body").animate({scrollTop:0},300,"easeInOutSine")})},scrollEvent:function(){function t(){$(this).scrollTop()>i?e.addClass("J-attachedhead"):e.removeClass("J-attachedhead")}var e=$(".J_header"),n=$(".J-totop"),i=e.outerHeight();$(window).on("scroll",function(){var e=$(this).scrollTop(),i=$(this);t.call(i),e<200?n.fadeOut(100):e>=200&&n.fadeIn(100),$(document).lazyLoad()})},headSwiper:function(){function t(t){$.each(t,function(){a=$('<img src="" data-src="'+this.img+'" alt="" class="cont-imgs">'),c=$('<li class="pointer"></li>'),l.append(a),r.append(c)}),r.children(c).eq(0).addClass("cur"),l.children(a).eq(0).clone().appendTo(l),a=$(".cont-imgs"),c=$(".pointer"),l.width((a.length+1)*f),e(),o(),s()}function e(){a.each(function(){var t=$(this).data("src"),e=$(this),n=new Image;$(n).prop("src",t),$(n).load(function(){0===e.index()&&e.prop("src",t).fadeIn(),n=null})}),h.step=0,h.timer=setInterval(n,2e3)}function n(t){isNaN(t)?h.step++:h.step=t,a.each(function(t){if(h.step===t){if(!0===a.eq(t).flag)return;var e=a.eq(t).data("src");a.eq(t).prop("src",e),a.eq(t).flag=!0}}),h.step>a.length-1&&(l.css("left",0),h.step=1);var e=h.step*-f;l.stop().animate({left:e},"slow"),i(h.step)}function i(t){h.step===a.length-1&&(t=0),c.eq(t).addClass("cur").siblings().removeClass("cur")}function s(){c.each(function(){$(this).hover(function(){n($(this).index())})})}function o(){$(".arrow.J_left").on("click",function(){0==h.step&&(h.step=a.length-1,l.css("left",h.step*-f)),h.step--,n(h.step)}),$(".arrow.J_right").on("click",function(){n()})}var a,c,l=$(".bannerimgs"),r=$(".focus"),u=$(".cont-bannerswiper"),h=u[0],d=$(".arrow"),f=u.width();$.ajax({type:"get",dataType:"json",cache:!1,url:"./data/data.json?="+new Date,success:function(e){t(e)},timeout:5e3,error:{}}),u.on("mouseenter",function(){clearInterval(h.timer),d.animate({opacity:.6},"normal"),d.on("mouseenter",function(){$(this).animate({opacity:1},"normal")}).on("mouseleave",function(){$(this).animate({opacity:.6},"normal")})}).on("mouseleave",function(){h.timer=setInterval(n,2e3),d.animate({opacity:.3},"normal")})},tabAnime:function(){function t(t){function e(t,e){var i=Math.atan2(e,t),s=180/Math.PI*i;return n=Math.round((s+180)/90)%4}var n,i=t.find(".J-mask"),s=t.outerWidth(),o=t.outerHeight();t.on("mouseenter",function(t){var a=$(this),c=t.clientX-a.offset().left-a.outerWidth()/2,l=a.outerHeight()/2-(t.clientY+$(window).scrollTop())+a.offset().top;switch(n=e(c,l)){case 0:i.css({left:-s,top:0});break;case 1:i.css({left:0,top:o});break;case 2:i.css({left:s,top:0});break;case 3:i.css({left:0,top:-o})}i.stop().animate({left:0,top:0},400,"easeInOutCirc")}),t.on("mouseleave",function(t){var a=$(this),c=t.clientX-a.offset().left-a.outerWidth()/2,l=a.outerHeight()/2-(t.clientY+$(window).scrollTop())+a.offset().top;n=e(c,l),console.log(n);var r=null;switch(n){case 0:r={left:-s,top:0};break;case 1:r={left:0,top:o};break;case 2:r={left:s,top:0};break;case 3:r={left:0,top:-o}}i.stop().animate(r,400,"easeInOutCirc")})}$(".cont-classcontlist").each(function(){t($(this))})},tabChange:function(){$(".J_cont-classpick").changeTab({title:".J_tabtitle",body:".J_tablist",curCls:"cur",duration:200})},suggestSearch:function(){function t(t,e){var n=$(".searchsuggest"),i="";$.each(t,function(s){s<=5&&(i+='<li class="suggestlist">'+t[s][e]+"</li>"),n.html(i)})}function e(t){if(40===t.keyCode)this.contInd++,n.call(this);else if(38===t.keyCode)this.contInd--,n.call(this);else if(13===t.keyCode){var e="https://www.baidu.com/s?&rsv_spt=1&wd="+$(this).val();window.location.href=e}}function n(){var t,e=$(this).next().children(".suggestlist");this.contInd>=e.length-1?this.contInd=-1:this.contInd<-1&&(this.contInd=e.last().index()-1),e.eq(this.contInd).addClass("cur").siblings(".suggestlist").removeClass("cur"),t=e.eq(this.contInd).text(),$(this).val(t)}function i(){var t=$(this).next().children(),e=this;t.on("mouseenter",function(){t.eq($(this).index()).addClass("cur").siblings(".suggestlist").removeClass("cur"),e.contInd=$(this).index(),$(this).on("click",function(t){var e="https://www.baidu.com/s?&rsv_spt=1&wd="+$(this).html();window.location.href=e})})}var s,o,a=$(".J_textsearch"),c=$(".searchsuggest");$(document).on("click",function(t){$(t.target).hasClass("J_textsearch")||a.siblings(c).hide()}),a.on("click",function(){s=$.trim(a.val());var e=this;e.contInd=-1,$(this).siblings(c).show(),s||$.ajax({url:"./data/history.json",dataType:"json",cache:!1,type:"get",success:function(n){n&&(t(n,"title"),o=n,i.call(e))}})}).on("input",function(e){var n=this;s=$.trim(a.val()),s?$.ajax({url:"https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su",type:"get",dataType:"jsonP",jsonp:"cb",cache:!1,data:{wd:s,json:1},success:function(e){e.g&&(t(e.g,"q"),i.call(n))}}):s||(t(o,"title"),n.contInd=-1,i.call(n))}).on("keydown",function(t){var n=this;e.call(n,t)})},slideDownMenu:function(t,e,n){$(t).on("mouseenter",$(e),function(){$(n).stop().slideDown()}).on("mouseleave",function(){$(n).stop().slideUp()})}},$(function(){cps.public.init()});